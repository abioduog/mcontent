<div class="provider-detail" th:unless="${#lists.isEmpty(provider)}">
    <form name="detail-form" class="pure-form pure-form-stacked" action="#"
          th:action="@{/provider/} + ${provider.id}" method="post">
        <div class="form-fields">
            <div th:if="${error}" class="alert alert-error" th:text="#{provider.error}">
                Error in provider data.
            </div>
            <div th:if="${saved}" class="alert alert-success" th:text="#{provider.saved}">
                Provider saved.
            </div>
            <input type="hidden" name="id" th:value="${provider.id}"/>

            <fieldset>
                <legend th:text="#{provider.basicInfo}">Basic Info</legend>

                <label for="name" th:text="#{provider.name}">Provider name</label>
                <input type="text" required="true" name="name" th:value="${provider.name}"/>

                <fieldset>
                    <legend th:text="#{provider.address}">Provider address</legend>

                    <label for="state" th:text="#{provider.state}">State</label>
                    <input type="text" required="true" name="state" th:value="${provider.state}"/>

                    <label for="country" th:text="#{provider.country}">Country</label>
                    <input type="text" required="true" name="country" th:value="${provider.country}"/>
                </fieldset>

                <label for="phone" th:text="#{provider.phone}">Telephone</label>
                <input type="text" required="true" name="phone" th:value="${provider.phone.number}"/>

                <label for="email" th:text="#{provider.email}">Email address</label>
                <input type="text" required="true" name="email" th:value="${provider.email.address}"/>
            </fieldset>

            <fieldset>
                <legend th:text="#{provider.loginInfo}">Login Info</legend>

                <label for="username" th:text="#{user.username}">Username</label>
                <input type="text" required="true" name="username" th:value="${provider.user.username}"/>

                <!-- TODO: map passwords somewhere -->
                <label for="password1" th:text="#{user.password}">Password</label>
                <input type="password" required="true" name="password1" />

                <label for="password2" th:text="#{user.passwordConfirm}">Confirm password</label>
                <input type="password" required="true" name="password2" />

            </fieldset>
            <fieldset>
                <legend th:text="#{provider.contactInfo}">Contact Info</legend>

                <label for="nameOfContactPerson" th:text="#{provider.nameOfContactPerson}">Name of provider's contact person</label>
                <input type="text" required="true" name="nameOfContactPerson" th:value="${provider.nameOfContactPerson}"/>

                <label for="positionOfContactPerson" th:text="#{provider.positionOfContactPerson}">Position of contact person</label>
                <input type="text" required="true" name="positionOfContactPerson" th:value="${provider.positionOfContactPerson}"/>

                <label for="phoneOfContactPerson" th:text="#{provider.phoneOfContactPerson}">Mobile number of contact person</label>
                <input type="text" required="true" name="phoneOfContactPerson" th:value="${provider.phoneOfContactPerson.number}"/>

                <label for="emailOfContactPerson" th:text="#{provider.emailOfContactPerson}">Email of contact person</label>
                <input type="text" required="true" name="emailOfContactPerson" th:value="${provider.emailOfContactPerson.address}"/>
            </fieldset>

            <fieldset>
                <legend th:text="#{provider.serviceInfo}">Service Info</legend>

                <label for="contentName" th:text="#{provider.contentName}">Content name</label>
                <input type="text" required="true" name="contentName" th:value="${provider.contentName}"/>

                <label for="contentDescription" th:text="#{provider.contentDescription}">Content description</label>
                <input type="text" required="true" name="contentDescription" th:value="${provider.contentDescription}"/>

            </fieldset>

            <fieldset>
                <legend th:text="#{provider.correspondence}">Correspondence</legend>

                <ul class="correspondence-list" th:each="correspondence : ${provider.correspondences}">
                    <li class="correspondence-item">
                        <a class="correspondence-item-link" href="#" target="_blank"
                           th:href="@{|/correspondence/${correspondence.id}/view|}"
                           th:text="${correspondence.name}">Correspondence 1</a>
                        <a class="correspondence-item-action-remove" href="#"
                           th:href="@{|/correspondence/${correspondence.id}/remove|}"
                           onclick="if (confirm('Are you sure you want to remove correspondence?')) {
                                       return callSimpleAction(this, event);
                                   } else {
                                       return false;
                                   }" th:text="#{general.remove}">Remove</a>
                    </li>
                </ul>
                <input type="file" name="correspondenceFile" th:value="${correspondenceFile}"/>
                <a class="correspondence-action-add" href="#"
                   th:href="@{|/correspondence/add|}"
                   onclick="callSimpleAction(this, event);" th:text="#{general.add}">Add new</a>
            </fieldset>

            <input type="hidden" th:name="save" />
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        </div>
        <div class="form-actions">
            <a href="#" onclick="submitFormOnPopup(this, event);" th:text="#{general.save}">Save</a>
            <a href="#" onclick="closePopup(this, event);" th:text="#{general.cancel}">Cancel</a>
        </div>
    </form>
</div>